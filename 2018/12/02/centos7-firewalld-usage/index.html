<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  
  <meta name="description" content="소프트웨어를 도구로 인류와 사회의 가치를 높이는데 소명을 다하는 삶">
  

  <!--Author-->
  
  <meta name="author" content="better than choi">
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="Centos7 firewalld 기반의 접근제어 사용법">
  
  <!--Open Graph Description-->
  
      <meta property="og:description" content="소프트웨어를 도구로 인류와 사회의 가치를 높이는데 소명을 다하는 삶">
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="C:\EEDLIVE">
  <!--Type page-->
  
      <meta property="og:type" content="article">
  
  <!--Page Cover-->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Title -->
  
  <title>Centos7 firewalld 기반의 접근제어 사용법 - C:\EEDLIVE</title>


  <link rel="shortcut icon" href="https://hexo.io/icon/favicon-96x96.png">

  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">

  <!----------------------------
  https://github.com/GallenHu/hexo-theme-Daily

 _____            _   _
|  __ \          (_) | |
| |  | |   __ _   _  | |  _   _
| |  | |  / _` | | | | | | | | |
| |__| | | (_| | | | | | | |_| |
|_____/   \__,_| |_| |_|  \__, |
                          __/ |
                         |___/

    --------------------------->

</head>


<body>

  <!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    <div class="logo">
      <a href="/" rel="home">
        
        <img src="https://hexo.io/logo.svg" alt="C:\EEDLIVE" height="60">
        
      </a>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/.">
                
                  home
                
              </a>
            </li>
          
            <li>
              <a href="/archives">
                
                  archive
                
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
  <div class="post">
    <!-- Post Content -->
    <div class="container">
      <article>
        <!-- Title date & tags -->
        <div class="post-header">
          <h1 class="entry-title">
            Centos7 firewalld 기반의 접근제어 사용법
            
          </h1>
          <p class="posted-on">
          2018-12-02
          </p>
          <div class="tags-links">
            
              
                <a href="/tags/linux/" rel="tag">
                  linux
                </a>
              
                <a href="/tags/centos7/" rel="tag">
                  centos7
                </a>
              
                <a href="/tags/firewalld/" rel="tag">
                  firewalld
                </a>
              
            
          </div>
        </div>
        <!-- Post Main Content -->
        <div class="entry-content has_line_number">
          <h2 id="firewalld"><a href="#firewalld" class="headerlink" title="firewalld"></a>firewalld</h2><p>RHEL 7 부터는 방화벽을 관리하는 데몬이 firewalld 로 변경되었고 방화벽 설정은 복잡한 iptables 명령어대신 firewall-cmd (콘솔), firewall-config(X-Windows) 명령어를 사용하는 것을 권장합니다.</p>
<p><a href="https://www.lesstif.com/pages/viewpage.action?pageId=22053128" target="_blank" rel="noopener">https://www.lesstif.com/pages/viewpage.action?pageId=22053128</a></p>
<h2 id="기본-사용법"><a href="#기본-사용법" class="headerlink" title="기본 사용법"></a>기본 사용법</h2><h3 id="조건-21-22-80-포트-TCP-를-허용"><a href="#조건-21-22-80-포트-TCP-를-허용" class="headerlink" title="조건: 21,22,80 포트(TCP)를 허용"></a>조건: 21,22,80 포트(TCP)를 허용</h3><p>룰 추가<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --add-port=21/tcp</span><br><span class="line">$ firewall-cmd --add-port=22/tcp</span><br><span class="line">$ firewall-cmd --add-port=80/tcp</span><br></pre></td></tr></table></figure></p>
<p>룰 삭제<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --remove-port=21/tcp</span><br><span class="line">$ firewall-cmd --remove-port=22/tcp</span><br><span class="line">$ firewall-cmd --remove-port=80/tcp</span><br></pre></td></tr></table></figure></p>
<h3 id="조건-8000-9000-까지의-포트-TCP-를-허용"><a href="#조건-8000-9000-까지의-포트-TCP-를-허용" class="headerlink" title="조건: 8000 ~ 9000 까지의 포트(TCP)를 허용"></a>조건: 8000 ~ 9000 까지의 포트(TCP)를 허용</h3><p>룰 추가<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --add-port=8000-9000/tcp</span><br></pre></td></tr></table></figure></p>
<p>룰 삭제<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --remove-port=8000-9000/tcp</span><br></pre></td></tr></table></figure></p>
<h3 id="조건-192-168-0-0-255-255-255-0-대역을-허용"><a href="#조건-192-168-0-0-255-255-255-0-대역을-허용" class="headerlink" title="조건: 192.168.0.0/255.255.255.0 대역을 허용"></a>조건: 192.168.0.0/255.255.255.0 대역을 허용</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --add-source=192.168.0.0/24</span><br><span class="line">$ firewall-cmd --remove-source=192.168.0.0/24</span><br></pre></td></tr></table></figure>
<h3 id="조건-192-168-3-100-아이피-IP-를-허용"><a href="#조건-192-168-3-100-아이피-IP-를-허용" class="headerlink" title="조건: 192.168.3.100 아이피(IP)를 허용"></a>조건: 192.168.3.100 아이피(IP)를 허용</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --add-source=192.168.3.100</span><br><span class="line">$ firewall-cmd --remove-source=192.168.3.100</span><br></pre></td></tr></table></figure>
<h3 id="조건-192-168-5-100-아이피-IP-를-차단"><a href="#조건-192-168-5-100-아이피-IP-를-차단" class="headerlink" title="조건: 192.168.5.100 아이피(IP)를 차단"></a>조건: 192.168.5.100 아이피(IP)를 차단</h3><p>reject<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --add-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.5.100 reject</span><br><span class="line">$ firewall-cmd --remove-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.5.100 reject</span><br></pre></td></tr></table></figure></p>
<p>drop<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --add-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.5.100 drop</span><br><span class="line">$ firewall-cmd --remove-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.5.100 drop</span><br></pre></td></tr></table></figure></p>
<p>reject vs drop<br>reject: 차단을 하되 “당신 차단 되었음” 이라는 응답을 전송<br>drop: 그냥 차단</p>
<h3 id="조건-192-168-10-170-아이피-IP-에-대해-80번-포트를-허용"><a href="#조건-192-168-10-170-아이피-IP-에-대해-80번-포트를-허용" class="headerlink" title="조건: 192.168.10.170 아이피(IP)에 대해 80번 포트를 허용"></a>조건: 192.168.10.170 아이피(IP)에 대해 80번 포트를 허용</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --add-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.10.170 port port=<span class="string">"80"</span> protocol=<span class="string">"tcp"</span> accept</span><br><span class="line">$ firewall-cmd --remove-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.10.170 port port=<span class="string">"80"</span> protocol=<span class="string">"tcp"</span> accept</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="설정파일-public-xml-에-적용-하기"><a href="#설정파일-public-xml-에-적용-하기" class="headerlink" title="설정파일(public.xml)에 적용 하기"></a>설정파일(public.xml)에 적용 하기</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --permanent 설정할 내용</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --permanent --add-port=21/tcp</span><br><span class="line">$ firewall-cmd --permanent --add-port=22/tcp</span><br><span class="line">$ firewall-cmd --permanent --add-port=80/tcp</span><br><span class="line">$ firewall-cmd --permanent --add-port=8000-9000/tcp</span><br><span class="line">$ firewall-cmd --permanent --add-source=192.168.0.0/24</span><br><span class="line">$ firewall-cmd --permanent --add-source=192.168.3.100</span><br><span class="line">$ firewall-cmd --permanent --add-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.5.100 reject</span><br><span class="line">$ firewall-cmd --permanent --add-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.5.100 drop</span><br><span class="line">$ firewall-cmd --permanent --add-rich-rule=<span class="string">'rule family="ipv4"'</span> <span class="built_in">source</span> address=192.168.10.170 port port=<span class="string">"80"</span> protocol=<span class="string">"tcp"</span> accept</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="터미널에서-상태-확인"><a href="#터미널에서-상태-확인" class="headerlink" title="터미널에서 상태 확인"></a>터미널에서 상태 확인</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --list-all</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public (default)</span><br><span class="line">interfaces:</span><br><span class="line">sources: 192.168.3.100 192.168.0.0/24</span><br><span class="line">services: dhcpv6-client ssh</span><br><span class="line">ports: 21/tcp 80/tcp 8000-9000/tcp 22/tcp</span><br><span class="line">masquerade: no</span><br><span class="line">forward-ports:</span><br><span class="line">icmp-blocks:</span><br><span class="line">rich rules:</span><br><span class="line">rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"192.168.5.100"</span> reject</span><br><span class="line">rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"192.168.5.100"</span> drop</span><br><span class="line">rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"192.168.10.170"</span> port port=<span class="string">"80"</span> protocol=<span class="string">"tcp"</span> accept</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="public-xml"><a href="#public-xml" class="headerlink" title="public.xml"></a>public.xml</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/firewalld/zones/public.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;zone&gt;</span><br><span class="line">&lt;short&gt;Public&lt;/short&gt;</span><br><span class="line">&lt;description&gt;&lt;/description&gt;</span><br><span class="line">&lt;<span class="built_in">source</span> address=<span class="string">"192.168.0.0/24"</span>/&gt;</span><br><span class="line">&lt;<span class="built_in">source</span> address=<span class="string">"192.168.3.100"</span>/&gt;</span><br><span class="line">&lt;service name=<span class="string">"dhcpv6-client"</span>/&gt;</span><br><span class="line">&lt;service name=<span class="string">"ssh"</span>/&gt;</span><br><span class="line">&lt;port protocol=<span class="string">"tcp"</span> port=<span class="string">"21"</span>/&gt;</span><br><span class="line">&lt;port protocol=<span class="string">"tcp"</span> port=<span class="string">"80"</span>/&gt;</span><br><span class="line">&lt;port protocol=<span class="string">"tcp"</span> port=<span class="string">"8000-9000"</span>/&gt;</span><br><span class="line">&lt;port protocol=<span class="string">"tcp"</span> port=<span class="string">"22"</span>/&gt;</span><br><span class="line">&lt;rule family=<span class="string">"ipv4"</span>&gt;</span><br><span class="line">&lt;<span class="built_in">source</span> address=<span class="string">"192.168.5.100"</span>/&gt;</span><br><span class="line">&lt;reject/&gt;</span><br><span class="line">&lt;/rule&gt;</span><br><span class="line">&lt;rule family=<span class="string">"ipv4"</span>&gt;</span><br><span class="line">&lt;<span class="built_in">source</span> address=<span class="string">"192.168.5.100"</span>/&gt;</span><br><span class="line">&lt;drop/&gt;</span><br><span class="line">&lt;/rule&gt;</span><br><span class="line">&lt;rule family=<span class="string">"ipv4"</span>&gt;</span><br><span class="line">&lt;<span class="built_in">source</span> address=<span class="string">"192.168.10.170"</span>/&gt;</span><br><span class="line">&lt;port protocol=<span class="string">"tcp"</span> port=<span class="string">"80"</span>/&gt;</span><br><span class="line">&lt;accept/&gt;</span><br><span class="line">&lt;/rule&gt;</span><br><span class="line">&lt;/zone&gt;</span><br></pre></td></tr></table></figure>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><p>CentOS 7 방화벽 관리하기 (firewalld) <a href="http://millky.com/@origoni/post/1128?language=ko_kr" target="_blank" rel="noopener">http://millky.com/@origoni/post/1128?language=ko_kr</a><br>RHEL/CentOS 7 에서 방화벽(firewalld) 설정하기 <a href="https://www.lesstif.com/pages/viewpage.action?pageId=22053128" target="_blank" rel="noopener">https://www.lesstif.com/pages/viewpage.action?pageId=22053128</a><br>리눅스 방화벽 firewalld (CentOS7) <a href="https://www.conory.com/note_linux/42477" target="_blank" rel="noopener">https://www.conory.com/note_linux/42477</a><br>CentOS 방화벽 사용방법 <a href="http://blog.plura.io/?p=4519" target="_blank" rel="noopener">http://blog.plura.io/?p=4519</a><br>CentOS7 <a href="https://www.cmsfactory.net/node/11421" target="_blank" rel="noopener">https://www.cmsfactory.net/node/11421</a></p>

        </div>
      </article>
    </div>
    <!-- Comments -->
    <div class="container">
      
<section id="comment">
  <!-- <h1 class="title">Comments</h1> -->

  
  <div id="disqus_thread">
    <script type="text/javascript">
    var disqus_config = function () {
          this.page.url = window.location.href;
          this.page.identifier = 'post-centos7-firewalld-usage';
          this.page.title = 'Centos7 firewalld 기반의 접근제어 사용법';
      };
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  
</section>


    </div>
    <!-- Pre or Next -->
    <div class="nav-links">
      
      
        <div class="nav-next">
          <a href="/2018/11/27/how-to-setup-under-construction-on-apache2-tomcat7/" rel="prev">Newer Posts <span class="meta-arraw meta-arraw-right"></span></a>
        </div>
      
    </div>

  </div>
</div>


  <!-- Footer -->
  <!-- Footer-widgets -->
<div class="footer-widgets">
  <div class="row inside-wrapper">
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">关于本站</h1>
        <div class="custom-widget-content">
          
          소프트웨어를 도구로 인류와 사회의 가치를 높이는데 소명을 다하는 삶
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">Contact</h1>
        <div class="widget-text">
          
            
              <a href="https://github.com/GallenHu" class="icon icon-github" target="_blank">github</a>
            
          
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">Search</h1>
        <div class="widget-text">
          <form onsubmit="return appDaily.submitSearch('')">
            <p>
              <input type="text" placeholder="search..." id="homeSearchInput">
            </p>
            <!-- <input type="submit" value="GO"> -->
          </form>
        </div>
      </aside>
    </div>
  </div>
</div>
<!-- Footer -->
<footer class="site-info">
  <p>
    <span>C:\EEDLIVE &copy; 2018</span>
    
      <span class="split">|</span>
      <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> with Theme <a href="https://github.com/GallenHu/hexo-theme-Daily" target="_blank">Daily</a></span>
    
  </p>
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="/js/app.js"></script>

<script>
  var disqus_shortname = 'ceedlive';

  
  var disqus_url = 'https://ceedlive.github.io/2018/12/02/centos7-firewalld-usage/';
  

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>





</body>

</html>
